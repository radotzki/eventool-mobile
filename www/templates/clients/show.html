<ion-view title="{{client.name}}">
<ion-content class="has-header">    

<div class="list card">

	<div class="item item-avatar">
		<img src="img/ionic.png">
		<h2>{{client.name}}</h2>
		<p>
			<i ng-if="client.gender == 'female'" class="icon ion-female"></i>
			<i ng-if="client.gender == 'male'" class="icon ion-male"></i>
			<span ng-if="client.birthdate"> {{client.birthdate | date}} </span>
			<span ng-if="client.city"> from {{client.city}} </span>			
		</p>
	</div>

	<div class="item item-body">	
		<p ng-repeat="comment in comments" class="item item-icon-right">
			{{comment.comment}}
			({{comment.user.first_name}} {{comment.user.last_name}} at {{comment.created_at | date}})
			<i class="icon ion-close-round" ng-click="deleteComment($index)" ng-if="comment.user.id == curUser.id"></i>
		</p>
	</div>

	<div class="item item-input-inset">
		<label class="item-input-wrapper">
			<input type="text" placeholder="new comment" ng-model="client.newComment">
		</label>
		<button class="button button-small" ng-click="addComment()">
			Add
		</button>
	</div>

	<div class="item tabs tabs-secondary tabs-icon-left">
		<a class="tab-item" href="#" ng-if="client.phone_number">
			<i class="icon ion-ios7-telephone"></i>
			Call
		</a>
		<a class="tab-item" ui-sref="app.updateClient({ clientId:client.id })">
			<i class="icon ion-edit"></i>
			Edit
		</a>
		<a class="tab-item" ng-click="deleteClient()">
			<i class="icon ion-trash-b"></i>
			Delete
		</a>
	</div>

</div>

<div class="list card">
	<label class="item item-input item-select">
		<div class="input-label">Event </div>
		<select ng-model="selectedEvent.id" ng-options="event.id as event.name for event in events">
		</select>
	</label>

	<ul class="list">
		<li class="item item-icon-right" ng-repeat="ticket in tickets | orderBy:'price.price' | filter:{event: selectedEvent}">
			{{ticket.price.price | currency}}
			<p>By {{ticket.promoter.first_name + " " + ticket.promoter.last_name}}</p>
			<i class="icon ion-checkmark-round" ng-if="eventPass(ticket.event) && ticket.arrived"></i>
			<i class="icon ion-close-round" ng-if="eventPass(ticket.event) && !ticket.arrived"></i>
		</li>
	</ul>

</div>

</ion-content>
</ion-view>