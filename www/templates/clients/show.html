<ion-view title="Profile">
<ion-nav-buttons side="right">
<button class="button button-clear right" ui-sref="app.updateClient({ clientId:client.id })" ng-if="curUser.role!='cashier'">EDIT</button>
</ion-nav-buttons>
<ion-content class="has-header"> 

<div style="position: relative;">
	<img src="img/clientCover.jpg" style="height: 300px;width: 100%; ">   

	<div class="text-center" style="position: absolute; top: 0px; height: 300px; width: 100%; background: rgba(68, 68, 68, 0.7)">
		<h1 style="color:#fff; margin-top:20%"> {{client.name}}</h1>

		<h4 style="color:#fff">
			<i ng-if="client.gender == 'female'" class="icon ion-female"></i>
			<i ng-if="client.gender == 'male'" class="icon ion-male"></i>
			<span ng-if="client.birthdate"> {{client.birthdate | date}} </span>
			<span ng-if="client.city"> from {{client.city}} </span>			
		</h4>
		<h4 style="color:#fff">
			<i class="icon ion-iphone"></i>
			<span> {{client.phone_number}} </span>
		</h4>

		<div class="row" style="margin-top:10%" ng-if="curUser.role!='cashier'">
			<div class="col" style="border-right:white solid thin">
				<h4 style="color:#fff">
					Tickets
					<br> {{tickets.length}}
				</h4>
			</div>
			<div class="col" style="border-right:white solid thin">
				<h4 style="color:#fff">
					Arrived
					<br> {{arrivedCount}}
				</h4>
			</div>
			<div class="col">
				<h4 style="color:#fff">
					Friends
					<br> 7
				</h4>
			</div>
		</div>

	</div>
</div>

<ion-slide-box show-pager="false" >

<ion-slide>
<p style="padding-bottom: 10px; padding-top: 10px;" class="text-center">
	<span style="font-weight: bold;"> TICKETS </span>
	<span style="margin-left: 10px;" ng-click="slideTo(1)"> COMMENTS </span>
	<span style="margin-left: 10px;" ng-click="slideTo(2)"> FRIENDS </span>
</p>
<a class="button button-block button-outline button-positive" ui-sref="app.createTicket({clientId:client.id})" style="margin-left: auto; margin-right: auto; width: 90%;">
	Add Ticket
</a>
<div class="list">
	<a class="item"
	ng-repeat="ticket in tickets | orderBy:'-event.when'" 
	collection-item-width="'100%'"
	collection-item-height="60"
	ui-sref="app.showTicket({ ticketId:ticket.id, clientId:ticket.client.id })"
	style="border: none;">
	<div style="border-bottom: #ddd; border-bottom-style: solid; border-bottom-width: thin;">
		{{ticket.event.name}} 
		<span style="font-size: 12px; color: #666;"> {{ticket.event.when | date:'dd/MM/yy'}} </span>
		<p style="color:red; float:right" ng-show="!ticket.arrived"> Not arrived </p>
		<p style="color:green; float:right" ng-show="ticket.arrived"> Arrived </p>
		<p style="margin-bottom: 15px"> {{ticket.price.price | currency}} By {{ticket.promoter.first_name + " " + ticket.promoter.last_name}}</p>
	</div>
</a>
</div>
<div class="text-center" style="margin-left: auto; margin-right: auto; width: 90%; margin-top: 30px;" ng-show="tickets.length==0">
	Have no tickets 
</div>
</ion-slide>

<ion-slide>
<p style="padding-bottom: 10px; padding-top: 10px;" class="text-center">
	<span ng-click="slideTo(0)"> TICKETS </span>
	<span style="margin-left: 10px; font-weight: bold;"> COMMENTS </span>
	<span style="margin-left: 10px" ng-click="slideTo(2)"> FRIENDS </span>
</p>
<a class="button button-block button-outline button-positive" ng-click="addComment()" style="margin-left: auto; margin-right: auto; width: 90%;">
	Add Comment
</a>
<div class="list">
	<a class="item item-avatar" ng-repeat="comment in comments | orderBy:'-created_at'" style="border: none;">
		<img src="img/avatar.jpg">
		<div style="border-bottom: #ddd; border-bottom-style: solid; border-bottom-width: thin;">
			<h2>{{comment.user.first_name}} {{comment.user.last_name}}</h2>
			<p style="color: black; margin-bottom: 5px; margin-top: 5px;">{{comment.comment}}</p>
			<p style="font-size: 12px; margin-bottom: 15px;"> 
				<i class="icon ion-ios7-clock-outline"></i> {{comment.newComment ? 'Just now' : comment.created_at | date}} 
			</p>
		</div>
	</a>
</div>
<div class="text-center" style="margin-left: auto; margin-right: auto; width: 90%; margin-top: 30px;"
ng-show="comments.length==0">
Have no comments 
</div>

</ion-slide>

<ion-slide>
<p style="padding-bottom: 10px; padding-top: 10px;" class="text-center">
	<span ng-click="slideTo(0)"> TICKETS </span>
	<span style="margin-left: 10px" ng-click="slideTo(1)"> COMMENTS </span>
	<span style="margin-left: 10px; font-weight: bold;"> FRIENDS </span>
</p>
<a class="button button-block button-outline button-positive" ui-sref="app.selectNewFriend({clientId:client.id})" style="margin-left: auto; margin-right: auto; width: 90%;">
	Add Friend
</a>
<div class="list">
	<a class="item item-avatar" ng-repeat="friend in friends | orderBy:'first_name'" style="border: none;">
		<img src="img/avatar.jpg">
		<div style="border-bottom: #ddd; border-bottom-style: solid; border-bottom-width: thin;">
			<span ng-if="friend.client_two.id==client.id">
				<h2 style="" ui-sref="app.showClient({ clientId:friend.client_one.id })">
					{{friend.client_one.first_name}} {{friend.client_one.last_name}}
				</h2>
				<p style="font-size: 12px; margin-bottom: 15px;"> 
					<i class="icon ion-ios7-clock-outline"></i> since {{friend.created_at | date}}
				</p>
			</span>
			<span ng-if="friend.client_one.id==client.id">
				<h2 style="" ui-sref="app.showClient({ clientId:friend.client_two.id })">
					{{friend.client_two.first_name}} {{friend.client_two.last_name}}
				</h2>
				<p style="font-size: 12px; margin-bottom: 15px;"> 
					<i class="icon ion-ios7-clock-outline"></i> since {{friend.created_at | date}}
				</p>
			</span>
		</div>
	</a>
</div>
<div class="text-center" style="margin-left: auto; margin-right: auto; width: 90%; margin-top: 30px;"
ng-show="friends.length==0">
Have no friends 
</div>
</ion-slide>
</ion-slide-box>

</ion-content>
</ion-view>