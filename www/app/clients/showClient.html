<ion-view title="Profile">
<ion-nav-buttons side="right">
<button class="button button-clear right" ui-sref="app.updateClient({ clientId: vm.client.id })" ng-if="vm.user.role!='cashier'">EDIT</button>
</ion-nav-buttons>
<ion-content class="has-header"> 

<div style="position: relative;">
	<img src="content/img/clientCover.jpg" style="height: 300px;width: 100%; ">   

	<div class="text-center" style="position: absolute; top: 0px; height: 300px; width: 100%; background: rgba(68, 68, 68, 0.7)">
		<h1 style="color:#fff; margin-top:20%"> {{vm.client.name}}</h1>

		<h4 style="color:#fff">
			<i ng-if="vm.client.gender == 'female'" class="icon ion-female"></i>
			<i ng-if="vm.client.gender == 'male'" class="icon ion-male"></i>
			<span ng-if="vm.client.birthdate"> {{vm.client.birthdate | date}} </span>
			<span ng-if="vm.client.city"> from {{vm.client.city}} </span>			
		</h4>
		<h4 style="color:#fff">
			<i class="icon ion-iphone"></i>
			<span> {{vm.client.phone_number}} </span>
		</h4>

		<div class="row" style="margin-top:10%" ng-if="user.role!='cashier'">
			<div class="col" style="border-right:white solid thin">
				<h4 style="color:#fff">
					Tickets
					<br> {{vm.tickets.length}}
				</h4>
			</div>
			<div class="col" style="border-right:white solid thin">
				<h4 style="color:#fff">
					Arrived
					<br> {{vm.arrivedCount}}
				</h4>
			</div>
			<div class="col">
				<h4 style="color:#fff">
					Friends
					<br> {{vm.friendsCount}}
				</h4>
			</div>
		</div>

	</div>
</div>

<div class="client-profile-nav" ng-init="section='tickets'">
	<p ng-class="{active: section=='tickets'}" ng-click="section='tickets'"> TICKETS </p>
	<p ng-class="{active: section=='comments'}" ng-click="section='comments'"> COMMENTS </p>
	<p ng-class="{active: section=='friends'}" ng-click="section='friends'"> FRIENDS </p>
</div>

<ng-switch on="section">
<div ng-switch-when="tickets">
	<a class="button button-block button-outline button-positive" ui-sref="app.createTicket({clientId: vm.client.id})" style="margin-left: auto; margin-right: auto; width: 90%;">
		Add Ticket
	</a>
	<et-tickets tickets="vm.tickets" target="client"> </et-tickets>
</div>
<div ng-switch-when="comments">
	<et-comments client-id="{{vm.client.id}}" user="vm.user"> </et-comments>
</div>
<div ng-switch-when="friends">
	<a class="button button-block button-outline button-positive" ui-sref="app.addFriend({clientId: vm.client.id})" style="margin-left: auto; margin-right: auto; width: 90%;">
		Add Friend
	</a>
	<et-friends client-id="{{vm.client.id}}"> </et-friends>
</div>
</ng-switch>


<div ng-if="user.role=='cashier'">
	<div class="list" ng-show="!clientArrived">
		<a class="item"
		ng-repeat="ticket in tickets | orderBy:'price.price'" 
		collection-item-width="'100%'"
		collection-item-height="60"
		ng-click="checkin(ticket)"
		style="border: none;">
		<div style="border-bottom: #ddd; border-bottom-style: solid; border-bottom-width: thin;">
			{{ticket.event.name}} 
			<span style="font-size: 12px; color: #666;"> {{ticket.event.when | date:'dd/MM/yy'}} </span>
			<p style="margin-bottom: 15px"> {{ticket.price.price | currency}} By {{ticket.promoter.first_name + " " + ticket.promoter.last_name}}</p>
		</div>
	</a>
</div>
<div class="text-center" style="margin-left: auto; margin-right: auto; width: 90%; margin-top: 30px;">
	<span ng-show="clientArrived"> {{client.name}} has already take his ticket for this event </span>
	<span ng-show="tickets.length==0"> {{client.name}} has no tickets for this event </span>
</div>
</div>

</ion-content>
</ion-view>