<ion-view title="{{vm.user.name}}">
<ion-nav-buttons side="right">
<button class="button button-clear right" ui-sref="app.updateUser({ userId:vm.user.id })">EDIT</button>
</ion-nav-buttons>
<ion-content class="has-header">    

<div style="position: relative;">
	<img src="content/img/clientCover.jpg" style="height: 300px;width: 100%; ">   

	<div class="text-center" style="position: absolute; top: 0px; height: 300px; width: 100%; background: rgba(68, 68, 68, 0.7)">
		<h1 style="color:#fff; margin-top:20%"> {{vm.user.name}}</h1>

		<h4 style="color:#fff">
			<span> {{vm.user.role}} </span>
			<span ng-if="vm.client.city"> from {{vm.client.city}} </span>			
		</h4>

		<div class="row" style="margin-top:10%" ng-if="vm.user.role != 'cashier'">
			<div class="col" style="border-right:white solid thin">
				<h4 style="color:#fff">
					Tickets
					<br> {{vm.ticketsAmount}}
				</h4>
			</div>
			<div class="col" style="border-right:white solid thin">
				<h4 style="color:#fff">
					Arrived
					<br> {{vm.arrivedAmount}}
				</h4>
			</div>
			<div class="col">
				<h4 style="color:#fff">
					Income
					<br> {{vm.income | currency}}
				</h4>
			</div>
		</div>

	</div>
</div>

<div class="list" ng-if="vm.user.role != 'cashier'">
	<div class="item item-divider" ng-repeat-start="value in vm.ticketsByEvents | orderBy: '-when'" ng-click="show=!show;" style="margin-bottom: 10px; text-align: center">
		<span> {{value.eventName}} </span>
		<span style="float: right"> {{value.arriveCount}} / {{value.tickets.length}} </span>
	</div>
	<div ng-show="show" class="item" ng-repeat="ticket in value.tickets | orderBy: 'client.first_name'" ui-sref="app.showTicket({ ticketId:ticket.id, clientId:ticket.client.id })">
		<span> {{ticket.price.price | currency}} to {{ticket.client.first_name + " " + ticket.client.last_name}}</span>
		<p style="color:red; float:right" ng-show="!ticket.arrived"> Not arrived </p>
		<p style="color:green; float:right" ng-show="ticket.arrived"> Arrived </p>
	</div>
	<div ng-repeat-end></div>
</div>

</ion-content>
</ion-view>